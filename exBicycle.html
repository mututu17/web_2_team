<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Test</title>
    <script src="js/jquery-1.9.1.js"></script>
    <!--USERID 바꾸기!!-->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=USERID"></script>
    </head>
<body>
    <!--자전거 레이어 ON/OFF 버튼 CSS-->
    <style type="txt/css">
        #wrap .buttons, #wrap .checkbox { position:absolute; top:0; left:0; z-index:1000; padding:5px; }
        #wrap .buttons .control-btn { margin:0 5px 5px 0; }
        #wrap .checkbox { top:30px;left:56px;border:solid 1px #333;padding:2px;background-color:#fff;display:none;font-size:11px; }
    </style>
    
    <!-- 지도를 만드는 div 생성 -->
    <div id="wrap" class="section">
        <h2>Map Test</h2>
        <div id="map" style="width:100%; height:600px;">
            <div class="buttons">
                <input id="bicycle" type="button" value="자전거" class="control-btn"/> <br>
            </div>
        </div>
    </div>
    
    <script id="data">
    var polylinePath = [
        new naver.maps.LatLng(35.16509312890069, 129.12682856179742),
        new naver.maps.LatLng(35.16532735950285, 129.12626558012514),
    ];

    </script>

    <!-- 지도 내부 조작을 위한 스크립트 -->
    <script id="code">
        
        var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(35.1335487, 129.1059875),
        });
        
        var bicycleLayer = new naver.maps.BicycleLayer();

        var polyline = new naver.maps.Polyline({
            path: polylinePath,
            strokeColor: '#00CA00',
            strokeOpacity: 0.8,
            strokeWeight: 6,
            zIndex: 2,
            clickable: true,
            map: map
        });

        

        // btn이 id=bicycle 인 DOM 객체를 나타냄
        var btn = $('#bicycle');

        /*이벤트 리스너 등록*/
        /*naver.maps.Event.addListener(이벤트 적용될 대상=map, 이벤트 이름='bicycleLayer_changed', 이벤트 리스너=function(bicycleLayer)*/
        naver.maps.Event.addListener(map, 'bicycleLayer_changed', function(bicycleLayer) {
            if (bicycleLayer) {
                btn.addClass('control-on');
            } else {
                btn.removeClass('control-on');
            }
        });
        
        btn.on("click", function(e) {
            e.preventDefault();
            
            // 레이어가 있다면
            if (bicycleLayer.getMap()) {
                bicycleLayer.setMap(null);  // 삭제
            }
            // 없다면
            else {
                bicycleLayer.setMap(map);   // 추가
            }
        });
        
        /*폴리라인에 대한 이벤트 함수*/
        naver.maps.Event.addListener(polyline, "mouseover", function () {
            polyline.setOptions({
                strokeWeight: 20
            });
        });

        naver.maps.Event.addListener(polyline, "mouseout", function () {
            polyline.setOptions({
                strokeWeight: 6
            });
        });

        naver.maps.Event.addListener(polyline, "mousedown", function () {
            polyline.setOptions({
                strokeWeight: 20
            });
        });
    
        naver.maps.Event.addListener(polyline, "mouseup", function () {
            polyline.setOptions({
                strokeWeight: 6
            });
        });

        naver.maps.Event.addListener(polyline, "click", function () {
            alert('수영강 코스입니다.');
        });
    
        // 시작하면 한번 하는 함수
        naver.maps.Event.once(map, 'init', function() {
            bicycleLayer.setMap(map);
        });
    </script>
</body>
</html>