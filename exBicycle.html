<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Test</title>
    <script src="js/jquery-1.9.1.js"></script>
    <!--USERID 바꾸기!!-->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=USERID"></script>
    </head>
<body>
    <!--자전거 레이어 ON/OFF 버튼 CSS-->
    <style type="txt/css">
        #wrap .buttons, #wrap .checkbox { position:absolute; top:0; left:0; z-index:1000; padding:5px; }
        #wrap .buttons .control-btn { margin:0 5px 5px 0; }
        #wrap .checkbox { top:30px;left:56px;border:solid 1px #333;padding:2px;background-color:#fff;display:none;font-size:11px; }
    </style>
    
    <!-- 지도를 만드는 div 생성 -->
    <div id="wrap" class="section">
        <h2>Map Test</h2>
        <div id="map" style="width:100%; height:600px;">
            <div class="buttons">
                <input id="bicycle" type="button" value="자전거" class="control-btn"/> <br>
            </div>
        </div>
    </div>
    
    <script id="data">
    var polylinePath = [
        new naver.maps.LatLng(35.16651994428058, 129.12492786885343),
        new naver.maps.LatLng(35.170958777178, 129.12222329082113),
        new naver.maps.LatLng(35.17286388547741, 129.12105910401624),
        new naver.maps.LatLng(35.17550898903027, 129.1187139152225),
        new naver.maps.LatLng(35.17670557434158, 129.11821321560998),
        new naver.maps.LatLng(35.17712651056232, 129.11809788062234),
        new naver.maps.LatLng(35.18097447459887, 129.11777658205753),
        new naver.maps.LatLng(35.18111488274443 , 129.11778127820347),
        new naver.maps.LatLng(35.18587322019679 , 129.1159275694985),
        new naver.maps.LatLng(35.186399216133054 , 129.1156229891022),
        new naver.maps.LatLng(35.18950866433023 , 129.1147162550351),
        new naver.maps.LatLng(35.19373472193521 , 129.11376761884807),
        new naver.maps.LatLng(35.1941721957518 , 129.11375580772264),
        new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        new naver.maps.LatLng(35.195628007480146 , 129.11393625741638),
        new naver.maps.LatLng(35.19695364934315 , 129.11428635081145),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
        //new naver.maps.LatLng(35.19537559910043 , 129.11398294312045),
    ];

    </script>

    <!-- 지도 내부 조작을 위한 스크립트 -->
    <script id="code">
        
        var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(35.18097447459887, 129.11777658205753),
        });
        
        var bicycleLayer = new naver.maps.BicycleLayer();

        var polyline = new naver.maps.Polyline({
            path: polylinePath,
            strokeColor: '#00CA00',
            strokeOpacity: 0.8,
            strokeWeight: 6,
            zIndex: 2,
            clickable: true,
            map: map
        });

        

        // btn이 id=bicycle 인 DOM 객체를 나타냄
        var btn = $('#bicycle');

        /*이벤트 리스너 등록*/
        /*naver.maps.Event.addListener(이벤트 적용될 대상=map, 이벤트 이름='bicycleLayer_changed', 이벤트 리스너=function(bicycleLayer)*/
        naver.maps.Event.addListener(map, 'bicycleLayer_changed', function(bicycleLayer) {
            if (bicycleLayer) {
                btn.addClass('control-on');
            } else {
                btn.removeClass('control-on');
            }
        });
        
        btn.on("click", function(e) {
            e.preventDefault();
            
            // 레이어가 있다면
            if (bicycleLayer.getMap()) {
                bicycleLayer.setMap(null);  // 삭제
            }
            // 없다면
            else {
                bicycleLayer.setMap(map);   // 추가
            }
        });
        
        /*폴리라인에 대한 이벤트 함수*/
        naver.maps.Event.addListener(polyline, "mouseover", function () {
            polyline.setOptions({
                strokeWeight: 20
            });
        });

        naver.maps.Event.addListener(polyline, "mouseout", function () {
            polyline.setOptions({
                strokeWeight: 6
            });
        });

        naver.maps.Event.addListener(polyline, "mousedown", function () {
            polyline.setOptions({
                strokeWeight: 20
            });
        });
    
        naver.maps.Event.addListener(polyline, "mouseup", function () {
            polyline.setOptions({
                strokeWeight: 6
            });
        });

        naver.maps.Event.addListener(polyline, "click", function () {
            alert('수영강 코스입니다.');
        });
    
        // 시작하면 한번 하는 함수
        naver.maps.Event.once(map, 'init', function() {
            bicycleLayer.setMap(map);
        });
    </script>
</body>
</html>